<Window x:Class="WhatAmIHearing.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WhatAmIHearing"
        xmlns:ui="clr-namespace:ZemotoUI"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        Title="What Am I Hearing?"
        Height="110"
        Width="400"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">
   <Window.DataContext>
      <local:MainViewModel />
   </Window.DataContext>
   <WindowChrome.WindowChrome>
      <WindowChrome CaptionHeight="24"
                    ResizeBorderThickness="0"
                    NonClientFrameEdges="None"
                    UseAeroCaptionButtons="False" />
   </WindowChrome.WindowChrome>
   <Window.Resources>
      <ResourceDictionary>
         <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="ControlStyles.xaml" />
         </ResourceDictionary.MergedDictionaries>

         <ui:BoolVisibilityConverter x:Key="VisibleIfFalse"
                                     Invert="True" />
      </ResourceDictionary>
   </Window.Resources>

   <Grid Margin="4">
      <Grid.Effect>
         <DropShadowEffect BlurRadius="8"
                           Direction="270"
                           ShadowDepth="1" />
      </Grid.Effect>
      <Grid.RowDefinitions>
         <RowDefinition Height="Auto" />
         <RowDefinition Height="*" />
      </Grid.RowDefinitions>

      <Rectangle Grid.RowSpan="2"
                 Fill="#D9E8FF"
                 RadiusX="4"
                 RadiusY="4" />

      <Grid Grid.Row="0"
            Margin="4,0">
         <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
         </Grid.ColumnDefinitions>
         <TextBlock Grid.ColumnSpan="3"
                    Text="What Am I Hearing?"
                    FontSize="14"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center" />
         <Button Grid.Column="1"
                 Click="OnMinimizeClicked"
                 Style="{StaticResource MenuButtonStyle}"
                 HorizontalAlignment="Right"
                 WindowChrome.IsHitTestVisibleInChrome="True">
            <Path Stroke="Black"
                  StrokeThickness="1">
               <Path.Data>
                  <PathGeometry Figures="M 0,5 L 10,5 Z" />
               </Path.Data>
            </Path>
         </Button>
         <Button Grid.Column="2"
                 Click="OnCloseClicked"
                 Style="{StaticResource MenuButtonStyle}"
                 HorizontalAlignment="Right"
                 WindowChrome.IsHitTestVisibleInChrome="True">
            <Path Stroke="Black"
                  StrokeThickness="1">
               <Path.Data>
                  <PathGeometry Figures="M 0,0 L 10,10 M 0,10 L 10,0" />
               </Path.Data>
            </Path>
         </Button>
      </Grid>

      <Grid Grid.Row="1">
         <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
         </Grid.ColumnDefinitions>

         <Grid Grid.Column="0"
               Margin="16,4,0,0"
               VerticalAlignment="Center">
            <Grid.RowDefinitions>
               <RowDefinition Height="Auto" />
               <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <ComboBox Grid.Row="0"
                      ItemsSource="{Binding DeviceNameList, Mode=OneTime}"
                      SelectedValue="{Binding SelectedDeviceName, Mode=TwoWay}"
                      Width="300"
                      Height="24">
               <ComboBox.ItemContainerStyle>
                  <Style TargetType="ComboBoxItem">
                     <Setter Property="Width"
                             Value="300" />
                  </Style>
               </ComboBox.ItemContainerStyle>
            </ComboBox>
            <ProgressBar Grid.Row="1"
                         Background="White"
                         Foreground="#69C3FF"
                         Value="{Binding Source={x:Static local:StatusReport.Status}, Path=Progress, Mode=OneWay}"
                         Height="24" />
            <TextBlock Grid.Row="1"
                       Text="{Binding Source={x:Static local:StatusReport.Status}, Path=Text, Mode=OneWay}"
                       Margin="4,6,4,0"
                       VerticalAlignment="Center"
                       Height="24" />
         </Grid>
         
         <Grid Grid.Column="1"
               HorizontalAlignment="Center">
            <Grid.Effect>
               <DropShadowEffect BlurRadius="4"
                                 Direction="270"
                                 ShadowDepth="1" />
            </Grid.Effect>
            <Button Style="{StaticResource PlayStopButtonStyle}"
                    Command="{Binding StopCommand}">
               <Path Fill="White"
                     Stretch="UniformToFill">
                  <Path.Data>
                     <PathGeometry Figures="M 0,0 L 0,1 1,1 1,0 Z" />
                  </Path.Data>
               </Path>
            </Button>
            <Button Style="{StaticResource PlayStopButtonStyle}"
                    Command="{Binding RecordCommand}"
                    Visibility="{Binding Recording, Converter={StaticResource VisibleIfFalse}}">
               <Ellipse Fill="White"
                        Stretch="UniformToFill" />
            </Button>
         </Grid>
      </Grid>
   </Grid>
</Window>
